/*! For license information please see main.85f94caf.chunk.js.LICENSE.txt */
(this["webpackJsonpnotes-with-tags"]=this["webpackJsonpnotes-with-tags"]||[]).push([[0],{60:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(25),i=r.n(c),o=r(17),a=r(3),u=r(26),s=r(8),d=r(1),l=Object(a.b)("footer")({padding:"0.5rem",textAlign:"center"}),b=function(){return Object(d.jsx)(l,{children:Object(d.jsx)("p",{children:"2021, made by Alex Sukhobski"})})},j=Object(a.b)("header")({padding:"0.5rem",borderBottom:"1px solid #eeeeee"}),p=Object(a.b)("h1")({display:"inline-block",cursor:"pointer"}),O=function(){var e=Object(s.g)();return Object(d.jsx)(j,{children:Object(d.jsx)(p,{onClick:function(){return e.push("/")},children:"Super shop"})})},h=r(6),g=r(10),f=r(70),x=r(7),m=r.n(x),v=r(12),y="FETCH_CATALOG_START",C="FETCH_CATALOG_SUCCESS",S="FETCH_CATALOG_ERROR",k="CREATE_PRODUCT_SUCCESS",w="CREATE_PRODUCT_ERROR",T="EDIT_PRODUCT_SUCCESS",E="EDIT_PRODUCT_ERROR",R="DELETE_PRODUCT_SUCCESS",P="DELETE_PRODUCT_ERROR",D="ON_CHANGE_CATEGORY";function q(e){return{type:C,catalog:e}}function _(e){return{type:R,id:e}}function I(){return function(){var e=Object(v.a)(m.a.mark((function e(t){var r,n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:y}),e.prev=1,!(r=window.localStorage.getItem("catalog"))){e.next=6;break}return t(q(JSON.parse(r))),e.abrupt("return");case 6:return e.next=8,fetch("https://fakestoreapi.com/products");case 8:return n=e.sent,e.next=11,n.json();case 11:return c=e.sent,window.localStorage.setItem("catalog",JSON.stringify(c)),t(q(c)),e.abrupt("return");case 17:e.prev=17,e.t0=e.catch(1),t((i=e.t0,{type:S,error:i}));case 20:case"end":return e.stop()}var i}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}()}function A(e){return function(){var t=Object(v.a)(m.a.mark((function t(r){var n,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://fakestoreapi.com/products/".concat(e),{method:"DELETE"});case 3:return n=t.sent,t.next=6,n.json();case 6:return c=t.sent,r(_(c.id)),t.abrupt("return");case 11:t.prev=11,t.t0=t.catch(0),r((i=t.t0,{type:P,error:i}));case 14:case"end":return t.stop()}var i}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}var N=Object(a.b)("li")({position:"relative",display:"grid",justifyItems:"center",gridTemplateRows:"auto 160px 25px",rowGap:"0.5rem",padding:"0.5rem",border:"1px solid #eeeeee",borderRadius:4,overflow:"hidden",cursor:"pointer",zIndex:0,"&:active":{borderColor:"#5a5a65"}}),J=Object(a.b)("header")({width:"100%"}),U=Object(a.b)("button")({width:"2rem",height:"2rem",outline:"none",borderRadius:32,border:"none",background:"url(/img/pen.png) no-repeat center",backgroundSize:"17px",cursor:"pointer",transition:"all .3s ease-out",zIndex:40,"&:active":{backgroundColor:"#e0e0e0"}}),F=Object(a.b)("button")((function(e){return{display:e.show?"inline-block":"none",width:"2rem",height:"2rem",outline:"none",borderRadius:32,border:"none",background:"url(./img/trash.png) no-repeat center",backgroundSize:"17px",cursor:"pointer",transition:"all .3s ease-out","&:active":{backgroundColor:"#e0e0e0"}}})),z=Object(a.b)("div")({display:"flex",justifyContent:"end"}),L=Object(a.b)("h3")({marginBottom:"0.5rem",fontSize:"1rem",textAlign:"center",overflow:"hidden","&:hover":{overflow:"visible"}}),G=Object(a.b)("p")({fontSize:"1.25rem",textAlign:"center"});var W=Object(o.b)(null,(function(e){return{deleteProduct:function(t){return e(A(t))}}}))((function(e){var t=e.product,r=e.isCreatedOnly,n=e.deleteProduct,c=t.id,i=t.title,o=t.image,a=void 0===o?"https://clck.ru/YEDXY":o,u=t.price,l=Object(s.g)();return Object(d.jsxs)(N,{onClick:function(){return l.push("/products/".concat(c))},children:[Object(d.jsxs)(J,{children:[Object(d.jsxs)(z,{children:[Object(d.jsx)(U,{onClick:function(e){e.stopPropagation(),l.push("/edit-product/".concat(c))}}),Object(d.jsx)(F,{onClick:function(e){e.stopPropagation(),n(c)},show:r})]}),Object(d.jsx)(L,{children:i})]}),Object(d.jsx)("img",{src:a,alt:i,height:"150px"}),Object(d.jsxs)(G,{children:[u,"$"]})]})})),B=Object(a.b)("section")({}),H=Object(a.b)("header")({padding:"0.5rem","& button":{marginRight:"0.5rem"},"& button:last-child":{marginRight:0}}),V=Object(a.b)("button")((function(e){return{width:40,padding:"0.5rem",border:"none",outline:"none",borderRadius:4,background:e.background,cursor:"pointer"}})),Y=Object(a.b)(V)({width:"auto"}),M=Object(a.b)("ul")({gridArea:"header",display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(284px, 1fr))",gap:"0.5rem",padding:"0.5rem",listStyleType:"none"});var X=Object(o.b)((function(e){return{catalog:e.catalog.catalog}}),(function(e){return{fetchComponentCatalog:function(){return e(I())}}}))((function(e){var t=e.fetchComponentCatalog,r=e.catalog,c=JSON.parse(window.localStorage.getItem("catalogState")),i=Object(n.useState)((null===c||void 0===c?void 0:c.itemsCount)||8),o=Object(g.a)(i,2),a=o[0],u=o[1],s=Object(n.useState)((null===c||void 0===c?void 0:c.isCreatedOnly)||!1),l=Object(g.a)(s,2),b=l[0],j=l[1],p=Object(n.useState)((null===c||void 0===c?void 0:c.isPublishedOnly)||!1),O=Object(g.a)(p,2),x=O[0],m=O[1],v=function(){var e=Object(h.a)(r);return x&&(e=e.filter((function(e){return!1!==e.isPublished}))),b&&(e=e.filter((function(e){return null===e||void 0===e?void 0:e.isCreate}))),e.filter((function(e,t){return t<a&&e}))}();return Object(n.useEffect)((function(){window.localStorage.setItem("catalogState",JSON.stringify({itemsCount:a,isCreatedOnly:b,isPublishedOnly:x}))}),[a,b,x]),Object(n.useEffect)((function(){return t()}),[]),Object(d.jsxs)(B,{children:[Object(d.jsxs)(H,{children:[Object(d.jsx)("span",{children:"Count: "}),Object(d.jsx)(V,{onClick:function(){return u(8)},type:"button",background:8===a?"#cccccc":"#efefef",children:"8"}),Object(d.jsx)(V,{onClick:function(){return u(16)},type:"button",background:16===a?"#cccccc":"#efefef",children:"16"}),Object(d.jsx)(V,{onClick:function(){return u(r.length)},type:"button",background:a===r.length?"#cccccc":"#efefef",children:"All"}),Object(d.jsx)(Y,{onClick:function(){return j((function(e){return!e}))},type:"button",background:b?"#cccccc":"#efefef",children:"Only created"}),Object(d.jsx)("span",{children:"Only published: "}),Object(d.jsx)(f.a,{checked:x,onChange:function(){return m(!x)},inputProps:{"aria-label":"controlled"}})]}),Object(d.jsx)(M,{children:v&&v.map((function(e){return e.id?Object(d.jsx)(W,{product:e,isCreatedOnly:b},e.id):null}))})]})})),$=Object(a.b)("nav")({padding:"0.5rem",border:"1px solid #eeeeee"}),Z=Object(a.b)("button")({padding:"0.5rem",border:"none",outline:"none",borderRadius:4,background:"#b8f2c8",cursor:"pointer","&:active":{background:"#a9deb7"}}),K=function(){var e=Object(s.g)();return Object(d.jsx)($,{children:Object(d.jsx)(Z,{onClick:function(){return e.push("/create-product")},type:"button",children:"Create product"})})},Q=Object(a.b)("main")({border:"1px solid #eeeeee"}),ee=function(){return Object(d.jsxs)(Q,{children:[Object(d.jsx)(K,{}),Object(d.jsx)(X,{})]})},te=Object(a.b)("section")({position:"relative",maxWidth:600,margin:"0 auto",padding:"0.5rem"}),re=Object(a.b)("img")({height:200}),ne=Object(a.b)("button")({position:"relative",left:"90%",display:"block",width:"2rem",height:"2rem",outline:"none",borderRadius:32,border:"none",background:"url(./img/trash.png) no-repeat center",backgroundSize:"17px",cursor:"pointer",transition:"all .3s ease-out","&:active":{backgroundColor:"#e0e0e0"}});var ce=Object(o.b)((function(e){return{catalog:e.catalog.catalog}}),(function(e){return{fetchComponentCatalog:function(){return e(I())},deleteProduct:function(t){return e(A(t))}}}))((function(e){var t=e.fetchComponentCatalog,r=e.catalog,c=e.deleteProduct,i=Object(s.h)().id,o=Object(s.g)(),a=r.find((function(e){return String(e.id)===String(i)})),u=a.category,l=void 0===u?"no category":u,b=a.description,j=a.image,p=void 0===j?"https://clck.ru/YEDXY":j,O=a.price,h=a.rating,g=void 0===h?{rate:0,count:0}:h,f=a.title;return Object(n.useEffect)((function(){return t()}),[]),Object(d.jsxs)(te,{children:[Object(d.jsx)(ne,{onClick:function(){c(i),o.push("/")}}),Object(d.jsx)("h2",{children:f}),Object(d.jsxs)("p",{children:["Category: ",l]}),Object(d.jsx)(re,{src:p,alt:f}),Object(d.jsx)("p",{children:b}),Object(d.jsxs)("p",{children:["Rating: ",g.rate,"/5 Count: ",g.count]}),Object(d.jsxs)("p",{children:[O,"$"]})]})})),ie=r(9),oe=r(28),ae=Object(a.b)("section")({margin:"0 auto",padding:"0.5rem"}),ue=Object(a.b)("form")({display:"grid",rowGap:"1rem",gridTemplateColumns:"minmax(auto, 500px)","& input":{width:"100%",padding:"0.5rem",borderRadius:4,border:"1px solid #dddddd",outline:"none"},'& input[type="checkbox"]':{width:"auto"}}),se=Object(a.b)("h3")({marginBottom:"1rem"}),de=a.b.p((function(e){return{color:e.error?"red":"#85de9e"}})),le=Object(a.b)("div")({display:"grid",columnGap:"1rem",gridTemplateColumns:"1fr 1fr"}),be=Object(a.b)("input")({"&:active":{background:"#e0e0e0"}}),je=Object(a.b)("button")({padding:"0.5rem",border:"1px solid #dddddd",borderRadius:4,outline:"none","&:active":{background:"#e0e0e0"}});var pe=Object(o.b)(null,(function(e){return{createProduct:function(t){return e(function(e){return{type:k,product:e}}(t))},createProductWithError:function(t){return e(function(e){return{type:w,error:e}}(t))}}}))((function(e){var t,r,c,i=e.createProduct,o=e.createProductWithError,a=Object(n.useState)(null),u=Object(g.a)(a,2),l=u[0],b=u[1],j=Object(s.g)(),p=Object(oe.a)(),O=p.register,h=p.formState.errors,f=p.reset,x=p.handleSubmit,y=function(e){var t=window.localStorage.getItem("catalog");if(t){var r=JSON.parse(t);r.push(e),window.localStorage.setItem("catalog",JSON.stringify(r))}else window.localStorage.setItem("catalog",JSON.stringify([e]))},C=function(){var e=Object(v.a)(m.a.mark((function e(t){var r,n,c,a,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://fakestoreapi.com/products",{method:"POST",body:JSON.stringify(t)});case 3:return r=e.sent,e.next=6,r.json();case 6:n=e.sent,c=new Date,a=n._id,u=Object(ie.a)({id:a,date:c,isCreate:!0},t),y(u),i(u),b("success"),setTimeout((function(){return b(null)}),3e3),f({title:"",description:"",price:"",isPublished:!1}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),o(e.t0),b("error"),setTimeout((function(){return b(null)}),3e3);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(ae,{children:[Object(d.jsx)(se,{children:"Create product"}),Object(d.jsxs)(ue,{onSubmit:x(C),children:[Object(d.jsx)("input",Object(ie.a)({placeholder:"Title"},O("title",{required:!0,pattern:/^[A-Za-z\u0410-\u042f\u0430-\u044f0-9]+/i,maxLength:50}))),"required"===(null===(t=h.title)||void 0===t?void 0:t.type)&&Object(d.jsx)("span",{style:{color:"red"},children:"Title is required"}),Object(d.jsx)("input",Object(ie.a)({placeholder:"Description"},O("description",{required:!0,maxLength:200}))),"required"===(null===(r=h.description)||void 0===r?void 0:r.type)&&Object(d.jsx)("span",{style:{color:"red"},children:"Description is required"}),Object(d.jsx)("input",Object(ie.a)({placeholder:"Price",type:"double"},O("price",{required:!0,min:.01}))),"required"===(null===(c=h.price)||void 0===c?void 0:c.type)&&Object(d.jsx)("span",{style:{color:"red"},children:"Price is required"}),Object(d.jsxs)("label",{htmlFor:"is-publish",children:[Object(d.jsx)("input",Object(ie.a)({type:"checkbox",id:"is-publish"},O("isPublished"))),"publish"]}),Object(d.jsxs)(le,{children:[Object(d.jsx)(be,{type:"submit"}),Object(d.jsx)(je,{onClick:function(){return j.push("/products")},type:"button",children:"Cancel"})]}),"success"===l&&Object(d.jsx)(de,{children:"The product has created successfully"}),"error"===l&&Object(d.jsx)(de,{error:!0,children:"The product hasn't created"})]})]})})),Oe=Object(a.b)("section")({padding:"0.5rem"}),he=Object(a.b)("p")({marginBottom:"0.25rem",fontSize:"0.75rem"}),ge=Object(a.b)("input")({"&:active":{background:"#e0e0e0"}});var fe,xe=Object(o.b)((function(e){return{catalog:e.catalog.catalog}}),(function(e){return{editProduct:function(t){return e({type:T,catalog:t})},editProductWithError:function(t){return e(function(e){return{type:E,error:e}}(t))}}}))((function(e){var t,r,c,i=e.catalog,o=e.editProduct,a=e.editProductWithError,u=Object(n.useState)(null),l=Object(g.a)(u,2),b=l[0],j=l[1],p=Object(s.g)(),O=Object(s.h)().id,f=i.find((function(e){return String(e.id)===String(O)})),x=Object(oe.a)(),y=x.register,C=x.formState.errors,S=x.handleSubmit,k=f.category,w=void 0===k?"":k,T=f.description,E=f.image,R=void 0===E?"":E,P=f.price,D=f.title,q=f.isPublished,_=function(){var e=Object(v.a)(m.a.mark((function e(t){var r,n,c,u,s,d,l,b,g,f,x,v;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.title,n=t.price,c=t.description,u=t.image,s=t.category,e.prev=1,e.next=4,fetch("https://fakestoreapi.com/products/".concat(O),{method:"PUT",body:JSON.stringify({title:r,price:+n,description:c,image:u,category:s})});case 4:return d=e.sent,e.next=7,d.json();case 7:l=e.sent,b=l.id,g=new Date,f=Object(ie.a)({id:b,date:g,isCreate:!0},t),x=Object(h.a)(i),v=x.findIndex((function(e){return String(e.id)===String(f.id)})),x[v]=f,window.localStorage.setItem("catalog",JSON.stringify(x)),o(x),j("success"),setTimeout((function(){return p.push("/")}),3e3),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),a(e.t0),j("error"),setTimeout((function(){return j(null)}),3e3);case 23:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(Oe,{children:[Object(d.jsx)(se,{children:"Edit product"}),Object(d.jsxs)(ue,{onSubmit:S(_),children:[Object(d.jsxs)("label",{htmlFor:"title",children:[Object(d.jsx)(he,{children:"Title"}),Object(d.jsx)("input",Object(ie.a)({placeholder:"Title",defaultValue:D,id:"title"},y("title",{required:!0,maxLength:100}))),"required"===(null===(t=C.title)||void 0===t?void 0:t.type)&&Object(d.jsx)("span",{style:{color:"red"},children:"Title is required"})]}),Object(d.jsxs)("label",{htmlFor:"category",children:[Object(d.jsx)(he,{children:"Category"}),Object(d.jsx)("input",Object(ie.a)({placeholder:"Category",defaultValue:w,id:"category"},y("category",{required:!0})))]}),Object(d.jsxs)("label",{htmlFor:"image-url",children:[Object(d.jsx)(he,{children:"Image url"}),Object(d.jsx)("input",Object(ie.a)({placeholder:"Image",defaultValue:R,id:"image-url"},y("image",{required:!0})))]}),Object(d.jsxs)("label",{htmlFor:"desctiption",children:[Object(d.jsx)(he,{children:"Description"}),Object(d.jsx)("input",Object(ie.a)({placeholder:"Description",defaultValue:T,id:"desctiption"},y("description",{required:!0}))),"required"===(null===(r=C.description)||void 0===r?void 0:r.type)&&Object(d.jsx)("span",{style:{color:"red"},children:"Description is required"})]}),Object(d.jsxs)("label",{htmlFor:"price",children:[Object(d.jsx)(he,{children:"Price"}),Object(d.jsx)("input",Object(ie.a)({placeholder:"Price",defaultValue:+P},y("price",{required:!0,min:.01}))),"required"===(null===(c=C.price)||void 0===c?void 0:c.type)&&Object(d.jsx)("span",{style:{color:"red"},children:"Price is required"})]}),Object(d.jsxs)("label",{htmlFor:"is-publish",children:[Object(d.jsx)("input",Object(ie.a)({type:"checkbox",id:"is-publish",defaultValue:q},y("isPublished"))),Object(d.jsx)("span",{children:"publish"})]}),Object(d.jsxs)(le,{children:[Object(d.jsx)(ge,{type:"submit"}),Object(d.jsx)(je,{onClick:function(){return p.push("/products")},type:"button",children:"Cancel"})]}),"success"===b&&Object(d.jsx)(de,{children:"The product has created successfully"}),"error"===b&&Object(d.jsx)(de,{error:!0,children:"The product hasn't created"})]})]})})),me=Object(a.b)("div")({position:"relative",display:"grid",gridTemplateRows:"auto 1fr auto",minHeight:"100vh",maxWidth:1280,margin:"0 auto",border:"1px solid #eeeeee"}),ve=function(){return Object(d.jsxs)(me,{children:[Object(d.jsxs)(u.a,{children:[Object(d.jsx)(O,{}),Object(d.jsxs)(s.d,{children:[Object(d.jsx)(s.b,{path:"/edit-product/:id",children:Object(d.jsx)(xe,{})}),Object(d.jsx)(s.b,{path:"/create-product",children:Object(d.jsx)(pe,{})}),Object(d.jsx)(s.b,{path:"/products/:id",children:Object(d.jsx)(ce,{})}),Object(d.jsx)(s.b,{path:"/products",children:Object(d.jsx)(ee,{})}),Object(d.jsx)(s.b,{path:"/",exact:!0,children:Object(d.jsx)(s.a,{to:"products"})}),Object(d.jsx)(s.b,{path:"*",children:Object(d.jsx)("div",{children:Object(d.jsx)("h2",{children:"404 error"})})})]})]}),Object(d.jsx)(b,{})]})},ye=r(19),Ce=Object(a.a)(fe||(fe=Object(ye.a)(["\n  *,\n  *::before,\n  *::after {\n    box-sizing: border-box;\n  }\n  /* \u0423\u0431\u0438\u0440\u0430\u0435\u043c \u0432\u043d\u0435\u0448\u043d\u0438\u0435 \u043e\u0442\u0441\u0442\u0443\u043f\u044b */\n  body,\n  h1,\n  h2,\n  h3,\n  h4,\n  p,\n  ul,\n  ol[class],\n  li,\n  figure,\n  figcaption,\n  blockquote,\n  dl,\n  dd {\n    margin: 0;\n  }\n  body {\n    scroll-behavior: smooth;\n    text-rendering: optimizeSpeed;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n    color: #5a5a65;\n  };\n  input,\n  button,\n  textarea,\n  select,\n  option {\n    font: inherit;\n  }\n"]))),Se=r(22),ke=r(40),we=r(41),Te={catalog:JSON.parse(window.localStorage.getItem("catalog"))||[]};var Ee={};var Re=Object(Se.combineReducers)({catalog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:case S:case w:case E:return Object(ie.a)({},e);case C:case T:return Object(ie.a)(Object(ie.a)({},e),{},{catalog:Object(h.a)(t.catalog)});case k:return Object(ie.a)(Object(ie.a)({},e),{},{catalog:[].concat(Object(h.a)(e.catalog),[t.product])});case R:return Object(ie.a)(Object(ie.a)({},e),{},{catalog:Object(h.a)(e.catalog.filter((function(e){return e.id!==t.id})))});case P:return Object(ie.a)(Object(ie.a)({},e),{},{catalog:Object(h.a)(e.catalog.filter((function(e){return String(e.id)!==String(t.id)})))});default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;return t.type===D?Object(ie.a)({},e):e}}),Pe=Object(we.composeWithDevTools)(Object(Se.applyMiddleware)(ke.a)),De=Object(Se.createStore)(Re,Pe),qe=Object(d.jsxs)(o.a,{store:De,children:[Object(d.jsx)(Ce,{}),Object(d.jsx)(ve,{})]});i.a.render(qe,document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.85f94caf.chunk.js.map